

## 持久化缓存方案分两步走

### 第1步：将静态资源（JavaScript 、CSS、图片字体文件等）存放到更合适的服务器
比如放到 CDN 服务器上，并且配置单独的域名。

- 这样做的好处是：
    - 更有利于服务的维护。保证动静资源分离，有利于服务的更好维护；
    - 提供加速服务。CDN可以更加接近用户的终端，提供加速服务；
    - 减少HTTP带宽。单独的域名可以减少页面请求中的Cookie等不必要字段，减少HTTP带宽。

同时配置合理的HTTP缓存协议，比如设置如下Cache-Control配置：
```
Cache-Control: max-age=31536000
```
上面的缓存时间是1年：31536000 / (3600 * 24) = 365天


### 第2步：针对发生了变更的静态资源进行重命名。
静态的文件使用了CDN和强缓存，但是只要内容变化，那么文件的路径（网址）发生了变化，浏览器还是会重新请求下载的。 

Webpack构建项目自动更新的方式是指定hash。Webpack的hash有3种：
- hash：每次编译 Compilation 对象的 hash，全局一致，跟单次编译有关，跟单个文件无关，不推荐使用；
- chunkhash：chunk 的 hash，根据不同的 chunk 及其包含的模块计算出来的 hash，chunk 中包含的任意模块发生变化，则 chunkhash 发生变化，推荐使用；
- contenthash：CSS 文件特有的 hash 值，是根据 CSS 文件内容计算出来的，CSS 发生变化则其值发生变化，推荐 CSS 导出中使用。



## 将依赖和 Runtime 提取到单独的文件中
